{"dependencies":[{"name":"../../../../common","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":74,"index":89}}],"key":"lWBwZ2gfCJqIdYPstlqcFfa1xEQ=","exportNames":["*"],"imports":1}},{"name":"../../../constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":90},"end":{"line":4,"column":54,"index":144}}],"key":"Wm1V4xbJi+V0U8qZIchubakwWPk=","exportNames":["*"],"imports":1}},{"name":"../common","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":145},"end":{"line":5,"column":52,"index":197}}],"key":"tbtg/nEigFLu9LmBKxGuAsZ2sgI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"ERROR_MESSAGES\", {\n    enumerable: true,\n    get: function () {\n      return ERROR_MESSAGES;\n    }\n  });\n  exports.normalizeKeyframeSelector = normalizeKeyframeSelector;\n  exports.processKeyframes = processKeyframes;\n  exports.normalizeAnimationKeyframes = normalizeAnimationKeyframes;\n  var _common = require(_dependencyMap[0], \"../../../../common\");\n  var _constants = require(_dependencyMap[1], \"../../../constants\");\n  var _common2 = require(_dependencyMap[2], \"../common\");\n  const ERROR_MESSAGES = {\n    invalidOffsetType: selector => `Invalid keyframe selector \"${selector}\". Only numbers, percentages, \"from\", and \"to\" are supported.`,\n    invalidOffsetRange: selector => `Invalid keyframe selector \"${selector}\". Expected a number between 0 and 1 or a percentage between 0% and 100%.`\n  };\n  function normalizeKeyframeSelector(keyframeSelector) {\n    const selectors = typeof keyframeSelector === 'string' ? keyframeSelector.split(',').map(k => k.trim()) : [keyframeSelector];\n    const offsets = selectors.map(selector => {\n      if (selector === 'from') {\n        return 0;\n      }\n      if (selector === 'to') {\n        return 1;\n      }\n      let offset;\n      if (typeof selector === 'number' || !isNaN(+selector)) {\n        offset = +selector;\n      } else if (_constants.PERCENTAGE_REGEX.test(selector)) {\n        offset = parseFloat(selector) / 100;\n      }\n      if (!(0, _common.isNumber)(offset)) {\n        throw new _common.ReanimatedError(ERROR_MESSAGES.invalidOffsetType(selector));\n      }\n      if (offset < 0 || offset > 1) {\n        throw new _common.ReanimatedError(ERROR_MESSAGES.invalidOffsetRange(selector));\n      }\n      return offset;\n    });\n    return offsets;\n  }\n  function processKeyframes(keyframes, styleBuilder) {\n    return Object.entries(keyframes).flatMap(([selector, {\n      animationTimingFunction = undefined,\n      ...style\n    } = {}]) => {\n      const normalizedStyle = styleBuilder.buildFrom(style);\n      if (!normalizedStyle) {\n        return [];\n      }\n      return normalizeKeyframeSelector(selector).map(offset => ({\n        offset,\n        style: normalizedStyle,\n        ...(animationTimingFunction && {\n          timingFunction: animationTimingFunction\n        })\n      }));\n    }).sort((a, b) => a.offset - b.offset).reduce((acc, keyframe) => {\n      const lastKeyframe = acc[acc.length - 1];\n      if (lastKeyframe && lastKeyframe.offset === keyframe.offset) {\n        lastKeyframe.style = {\n          ...lastKeyframe.style,\n          ...keyframe.style\n        };\n        lastKeyframe.timingFunction = keyframe.timingFunction;\n      } else {\n        acc.push(keyframe);\n      }\n      return acc;\n    }, []);\n  }\n  function processStyleProperties(offset, style, keyframeStyle, styleBuilder) {\n    Object.entries(style).forEach(([property, value]) => {\n      if (!(0, _common.isDefined)(value)) {\n        return;\n      }\n      if (typeof value === 'object') {\n        if (styleBuilder.isSeparatelyInterpolatedNestedProperty(property)) {\n          if (!keyframeStyle[property]) {\n            keyframeStyle[property] = Array.isArray(value) ? [] : {};\n          }\n          processStyleProperties(offset, value, keyframeStyle[property], styleBuilder);\n          return;\n        }\n      }\n      if (!keyframeStyle[property]) {\n        keyframeStyle[property] = [];\n      }\n      keyframeStyle[property].push({\n        offset,\n        value\n      });\n    });\n  }\n  function normalizeAnimationKeyframes(keyframes, styleBuilder) {\n    const keyframesStyle = {};\n    const timingFunctions = {};\n    processKeyframes(keyframes, styleBuilder).forEach(({\n      offset,\n      style,\n      timingFunction\n    }) => {\n      processStyleProperties(offset, style, keyframesStyle, styleBuilder);\n      if (timingFunction && offset < 1) {\n        timingFunctions[offset] = (0, _common2.normalizeTimingFunction)(timingFunction);\n      }\n    });\n    return {\n      keyframesStyle,\n      keyframeTimingFunctions: timingFunctions\n    };\n  }\n});","lineCount":119,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,6,0,"Object"],[7,8,6,0],[7,9,6,0,"defineProperty"],[7,23,6,0],[7,24,6,0,"exports"],[7,31,6,0],[8,4,6,0,"enumerable"],[8,14,6,0],[9,4,6,0,"get"],[9,7,6,0],[9,18,6,0,"get"],[9,19,6,0],[10,6,6,0],[10,13,6,0,"ERROR_MESSAGES"],[10,27,6,0],[11,4,6,0],[12,2,6,0],[13,2,10,0,"exports"],[13,9,10,0],[13,10,10,0,"normalizeKeyframeSelector"],[13,35,10,0],[13,38,10,0,"normalizeKeyframeSelector"],[13,63,10,0],[14,2,35,0,"exports"],[14,9,35,0],[14,10,35,0,"processKeyframes"],[14,26,35,0],[14,29,35,0,"processKeyframes"],[14,45,35,0],[15,2,88,0,"exports"],[15,9,88,0],[15,10,88,0,"normalizeAnimationKeyframes"],[15,37,88,0],[15,40,88,0,"normalizeAnimationKeyframes"],[15,67,88,0],[16,2,3,0],[16,6,3,0,"_common"],[16,13,3,0],[16,16,3,0,"require"],[16,23,3,0],[16,24,3,0,"_dependencyMap"],[16,38,3,0],[17,2,4,0],[17,6,4,0,"_constants"],[17,16,4,0],[17,19,4,0,"require"],[17,26,4,0],[17,27,4,0,"_dependencyMap"],[17,41,4,0],[18,2,5,0],[18,6,5,0,"_common2"],[18,14,5,0],[18,17,5,0,"require"],[18,24,5,0],[18,25,5,0,"_dependencyMap"],[18,39,5,0],[19,2,6,7],[19,8,6,13,"ERROR_MESSAGES"],[19,22,6,27],[19,25,6,30],[20,4,7,2,"invalidOffsetType"],[20,21,7,19],[20,23,7,21,"selector"],[20,31,7,29],[20,35,7,33],[20,65,7,63,"selector"],[20,73,7,71],[20,136,7,134],[21,4,8,2,"invalidOffsetRange"],[21,22,8,20],[21,24,8,22,"selector"],[21,32,8,30],[21,36,8,34],[21,66,8,64,"selector"],[21,74,8,72],[22,2,9,0],[22,3,9,1],[23,2,10,7],[23,11,10,16,"normalizeKeyframeSelector"],[23,36,10,41,"normalizeKeyframeSelector"],[23,37,10,42,"keyframeSelector"],[23,53,10,58],[23,55,10,60],[24,4,11,2],[24,10,11,8,"selectors"],[24,19,11,17],[24,22,11,20],[24,29,11,27,"keyframeSelector"],[24,45,11,43],[24,50,11,48],[24,58,11,56],[24,61,11,59,"keyframeSelector"],[24,77,11,75],[24,78,11,76,"split"],[24,83,11,81],[24,84,11,82],[24,87,11,85],[24,88,11,86],[24,89,11,87,"map"],[24,92,11,90],[24,93,11,91,"k"],[24,94,11,92],[24,98,11,96,"k"],[24,99,11,97],[24,100,11,98,"trim"],[24,104,11,102],[24,105,11,103],[24,106,11,104],[24,107,11,105],[24,110,11,108],[24,111,11,109,"keyframeSelector"],[24,127,11,125],[24,128,11,126],[25,4,12,2],[25,10,12,8,"offsets"],[25,17,12,15],[25,20,12,18,"selectors"],[25,29,12,27],[25,30,12,28,"map"],[25,33,12,31],[25,34,12,32,"selector"],[25,42,12,40],[25,46,12,44],[26,6,13,4],[26,10,13,8,"selector"],[26,18,13,16],[26,23,13,21],[26,29,13,27],[26,31,13,29],[27,8,14,6],[27,15,14,13],[27,16,14,14],[28,6,15,4],[29,6,16,4],[29,10,16,8,"selector"],[29,18,16,16],[29,23,16,21],[29,27,16,25],[29,29,16,27],[30,8,17,6],[30,15,17,13],[30,16,17,14],[31,6,18,4],[32,6,19,4],[32,10,19,8,"offset"],[32,16,19,14],[33,6,20,4],[33,10,20,8],[33,17,20,15,"selector"],[33,25,20,23],[33,30,20,28],[33,38,20,36],[33,42,20,40],[33,43,20,41,"isNaN"],[33,48,20,46],[33,49,20,47],[33,50,20,48,"selector"],[33,58,20,56],[33,59,20,57],[33,61,20,59],[34,8,21,6,"offset"],[34,14,21,12],[34,17,21,15],[34,18,21,16,"selector"],[34,26,21,24],[35,6,22,4],[35,7,22,5],[35,13,22,11],[35,17,22,15,"PERCENTAGE_REGEX"],[35,27,22,31],[35,28,22,31,"PERCENTAGE_REGEX"],[35,44,22,31],[35,45,22,32,"test"],[35,49,22,36],[35,50,22,37,"selector"],[35,58,22,45],[35,59,22,46],[35,61,22,48],[36,8,23,6,"offset"],[36,14,23,12],[36,17,23,15,"parseFloat"],[36,27,23,25],[36,28,23,26,"selector"],[36,36,23,34],[36,37,23,35],[36,40,23,38],[36,43,23,41],[37,6,24,4],[38,6,25,4],[38,10,25,8],[38,11,25,9],[38,15,25,9,"isNumber"],[38,22,25,17],[38,23,25,17,"isNumber"],[38,31,25,17],[38,33,25,18,"offset"],[38,39,25,24],[38,40,25,25],[38,42,25,27],[39,8,26,6],[39,14,26,12],[39,18,26,16,"ReanimatedError"],[39,25,26,31],[39,26,26,31,"ReanimatedError"],[39,41,26,31],[39,42,26,32,"ERROR_MESSAGES"],[39,56,26,46],[39,57,26,47,"invalidOffsetType"],[39,74,26,64],[39,75,26,65,"selector"],[39,83,26,73],[39,84,26,74],[39,85,26,75],[40,6,27,4],[41,6,28,4],[41,10,28,8,"offset"],[41,16,28,14],[41,19,28,17],[41,20,28,18],[41,24,28,22,"offset"],[41,30,28,28],[41,33,28,31],[41,34,28,32],[41,36,28,34],[42,8,29,6],[42,14,29,12],[42,18,29,16,"ReanimatedError"],[42,25,29,31],[42,26,29,31,"ReanimatedError"],[42,41,29,31],[42,42,29,32,"ERROR_MESSAGES"],[42,56,29,46],[42,57,29,47,"invalidOffsetRange"],[42,75,29,65],[42,76,29,66,"selector"],[42,84,29,74],[42,85,29,75],[42,86,29,76],[43,6,30,4],[44,6,31,4],[44,13,31,11,"offset"],[44,19,31,17],[45,4,32,2],[45,5,32,3],[45,6,32,4],[46,4,33,2],[46,11,33,9,"offsets"],[46,18,33,16],[47,2,34,0],[48,2,35,7],[48,11,35,16,"processKeyframes"],[48,27,35,32,"processKeyframes"],[48,28,35,33,"keyframes"],[48,37,35,42],[48,39,35,44,"styleBuilder"],[48,51,35,56],[48,53,35,58],[49,4,36,2],[49,11,36,9,"Object"],[49,17,36,15],[49,18,36,16,"entries"],[49,25,36,23],[49,26,36,24,"keyframes"],[49,35,36,33],[49,36,36,34],[49,37,36,35,"flatMap"],[49,44,36,42],[49,45,36,43],[49,46,36,44],[49,47,36,45,"selector"],[49,55,36,53],[49,57,36,55],[50,6,37,4,"animationTimingFunction"],[50,29,37,27],[50,32,37,30,"undefined"],[50,41,37,39],[51,6,38,4],[51,9,38,7,"style"],[52,4,39,2],[52,5,39,3],[52,8,39,6],[52,9,39,7],[52,10,39,8],[52,11,39,9],[52,16,39,14],[53,6,40,4],[53,12,40,10,"normalizedStyle"],[53,27,40,25],[53,30,40,28,"styleBuilder"],[53,42,40,40],[53,43,40,41,"buildFrom"],[53,52,40,50],[53,53,40,51,"style"],[53,58,40,56],[53,59,40,57],[54,6,41,4],[54,10,41,8],[54,11,41,9,"normalizedStyle"],[54,26,41,24],[54,28,41,26],[55,8,42,6],[55,15,42,13],[55,17,42,15],[56,6,43,4],[57,6,44,4],[57,13,44,11,"normalizeKeyframeSelector"],[57,38,44,36],[57,39,44,37,"selector"],[57,47,44,45],[57,48,44,46],[57,49,44,47,"map"],[57,52,44,50],[57,53,44,51,"offset"],[57,59,44,57],[57,64,44,62],[58,8,45,6,"offset"],[58,14,45,12],[59,8,46,6,"style"],[59,13,46,11],[59,15,46,13,"normalizedStyle"],[59,30,46,28],[60,8,47,6],[60,12,47,10,"animationTimingFunction"],[60,35,47,33],[60,39,47,37],[61,10,48,8,"timingFunction"],[61,24,48,22],[61,26,48,24,"animationTimingFunction"],[62,8,49,6],[62,9,49,7],[63,6,50,4],[63,7,50,5],[63,8,50,6],[63,9,50,7],[64,4,51,2],[64,5,51,3],[64,6,51,4],[64,7,51,5,"sort"],[64,11,51,9],[64,12,51,10],[64,13,51,11,"a"],[64,14,51,12],[64,16,51,14,"b"],[64,17,51,15],[64,22,51,20,"a"],[64,23,51,21],[64,24,51,22,"offset"],[64,30,51,28],[64,33,51,31,"b"],[64,34,51,32],[64,35,51,33,"offset"],[64,41,51,39],[64,42,51,40],[64,43,51,41,"reduce"],[64,49,51,47],[64,50,51,48],[64,51,51,49,"acc"],[64,54,51,52],[64,56,51,54,"keyframe"],[64,64,51,62],[64,69,51,67],[65,6,52,4],[65,12,52,10,"lastKeyframe"],[65,24,52,22],[65,27,52,25,"acc"],[65,30,52,28],[65,31,52,29,"acc"],[65,34,52,32],[65,35,52,33,"length"],[65,41,52,39],[65,44,52,42],[65,45,52,43],[65,46,52,44],[66,6,53,4],[66,10,53,8,"lastKeyframe"],[66,22,53,20],[66,26,53,24,"lastKeyframe"],[66,38,53,36],[66,39,53,37,"offset"],[66,45,53,43],[66,50,53,48,"keyframe"],[66,58,53,56],[66,59,53,57,"offset"],[66,65,53,63],[66,67,53,65],[67,8,54,6,"lastKeyframe"],[67,20,54,18],[67,21,54,19,"style"],[67,26,54,24],[67,29,54,27],[68,10,55,8],[68,13,55,11,"lastKeyframe"],[68,25,55,23],[68,26,55,24,"style"],[68,31,55,29],[69,10,56,8],[69,13,56,11,"keyframe"],[69,21,56,19],[69,22,56,20,"style"],[70,8,57,6],[70,9,57,7],[71,8,58,6,"lastKeyframe"],[71,20,58,18],[71,21,58,19,"timingFunction"],[71,35,58,33],[71,38,58,36,"keyframe"],[71,46,58,44],[71,47,58,45,"timingFunction"],[71,61,58,59],[72,6,59,4],[72,7,59,5],[72,13,59,11],[73,8,60,6,"acc"],[73,11,60,9],[73,12,60,10,"push"],[73,16,60,14],[73,17,60,15,"keyframe"],[73,25,60,23],[73,26,60,24],[74,6,61,4],[75,6,62,4],[75,13,62,11,"acc"],[75,16,62,14],[76,4,63,2],[76,5,63,3],[76,7,63,5],[76,9,63,7],[76,10,63,8],[77,2,64,0],[78,2,65,0],[78,11,65,9,"processStyleProperties"],[78,33,65,31,"processStyleProperties"],[78,34,65,32,"offset"],[78,40,65,38],[78,42,65,40,"style"],[78,47,65,45],[78,49,65,47,"keyframeStyle"],[78,62,65,60],[78,64,65,62,"styleBuilder"],[78,76,65,74],[78,78,65,76],[79,4,66,2,"Object"],[79,10,66,8],[79,11,66,9,"entries"],[79,18,66,16],[79,19,66,17,"style"],[79,24,66,22],[79,25,66,23],[79,26,66,24,"forEach"],[79,33,66,31],[79,34,66,32],[79,35,66,33],[79,36,66,34,"property"],[79,44,66,42],[79,46,66,44,"value"],[79,51,66,49],[79,52,66,50],[79,57,66,55],[80,6,67,4],[80,10,67,8],[80,11,67,9],[80,15,67,9,"isDefined"],[80,22,67,18],[80,23,67,18,"isDefined"],[80,32,67,18],[80,34,67,19,"value"],[80,39,67,24],[80,40,67,25],[80,42,67,27],[81,8,68,6],[82,6,69,4],[83,6,70,4],[83,10,70,8],[83,17,70,15,"value"],[83,22,70,20],[83,27,70,25],[83,35,70,33],[83,37,70,35],[84,8,71,6],[84,12,71,10,"styleBuilder"],[84,24,71,22],[84,25,71,23,"isSeparatelyInterpolatedNestedProperty"],[84,63,71,61],[84,64,71,62,"property"],[84,72,71,70],[84,73,71,71],[84,75,71,73],[85,10,72,8],[85,14,72,12],[85,15,72,13,"keyframeStyle"],[85,28,72,26],[85,29,72,27,"property"],[85,37,72,35],[85,38,72,36],[85,40,72,38],[86,12,73,10,"keyframeStyle"],[86,25,73,23],[86,26,73,24,"property"],[86,34,73,32],[86,35,73,33],[86,38,73,36,"Array"],[86,43,73,41],[86,44,73,42,"isArray"],[86,51,73,49],[86,52,73,50,"value"],[86,57,73,55],[86,58,73,56],[86,61,73,59],[86,63,73,61],[86,66,73,64],[86,67,73,65],[86,68,73,66],[87,10,74,8],[88,10,75,8,"processStyleProperties"],[88,32,75,30],[88,33,75,31,"offset"],[88,39,75,37],[88,41,75,39,"value"],[88,46,75,44],[88,48,75,46,"keyframeStyle"],[88,61,75,59],[88,62,75,60,"property"],[88,70,75,68],[88,71,75,69],[88,73,75,71,"styleBuilder"],[88,85,75,83],[88,86,75,84],[89,10,76,8],[90,8,77,6],[91,6,78,4],[92,6,79,4],[92,10,79,8],[92,11,79,9,"keyframeStyle"],[92,24,79,22],[92,25,79,23,"property"],[92,33,79,31],[92,34,79,32],[92,36,79,34],[93,8,80,6,"keyframeStyle"],[93,21,80,19],[93,22,80,20,"property"],[93,30,80,28],[93,31,80,29],[93,34,80,32],[93,36,80,34],[94,6,81,4],[95,6,82,4,"keyframeStyle"],[95,19,82,17],[95,20,82,18,"property"],[95,28,82,26],[95,29,82,27],[95,30,82,28,"push"],[95,34,82,32],[95,35,82,33],[96,8,83,6,"offset"],[96,14,83,12],[97,8,84,6,"value"],[98,6,85,4],[98,7,85,5],[98,8,85,6],[99,4,86,2],[99,5,86,3],[99,6,86,4],[100,2,87,0],[101,2,88,7],[101,11,88,16,"normalizeAnimationKeyframes"],[101,38,88,43,"normalizeAnimationKeyframes"],[101,39,88,44,"keyframes"],[101,48,88,53],[101,50,88,55,"styleBuilder"],[101,62,88,67],[101,64,88,69],[102,4,89,2],[102,10,89,8,"keyframesStyle"],[102,24,89,22],[102,27,89,25],[102,28,89,26],[102,29,89,27],[103,4,90,2],[103,10,90,8,"timingFunctions"],[103,25,90,23],[103,28,90,26],[103,29,90,27],[103,30,90,28],[104,4,91,2,"processKeyframes"],[104,20,91,18],[104,21,91,19,"keyframes"],[104,30,91,28],[104,32,91,30,"styleBuilder"],[104,44,91,42],[104,45,91,43],[104,46,91,44,"forEach"],[104,53,91,51],[104,54,91,52],[104,55,91,53],[105,6,92,4,"offset"],[105,12,92,10],[106,6,93,4,"style"],[106,11,93,9],[107,6,94,4,"timingFunction"],[108,4,95,2],[108,5,95,3],[108,10,95,8],[109,6,96,4,"processStyleProperties"],[109,28,96,26],[109,29,96,27,"offset"],[109,35,96,33],[109,37,96,35,"style"],[109,42,96,40],[109,44,96,42,"keyframesStyle"],[109,58,96,56],[109,60,96,58,"styleBuilder"],[109,72,96,70],[109,73,96,71],[110,6,97,4],[110,10,97,8,"timingFunction"],[110,24,97,22],[110,28,97,26,"offset"],[110,34,97,32],[110,37,97,35],[110,38,97,36],[110,40,97,38],[111,8,98,6,"timingFunctions"],[111,23,98,21],[111,24,98,22,"offset"],[111,30,98,28],[111,31,98,29],[111,34,98,32],[111,38,98,32,"normalizeTimingFunction"],[111,46,98,55],[111,47,98,55,"normalizeTimingFunction"],[111,70,98,55],[111,72,98,56,"timingFunction"],[111,86,98,70],[111,87,98,71],[112,6,99,4],[113,4,100,2],[113,5,100,3],[113,6,100,4],[114,4,101,2],[114,11,101,9],[115,6,102,4,"keyframesStyle"],[115,20,102,18],[116,6,103,4,"keyframeTimingFunctions"],[116,29,103,27],[116,31,103,29,"timingFunctions"],[117,4,104,2],[117,5,104,3],[118,2,105,0],[119,0,105,1],[119,3]],"functionMap":{"names":["<global>","ERROR_MESSAGES.invalidOffsetType","ERROR_MESSAGES.invalidOffsetRange","normalizeKeyframeSelector","keyframeSelector.split.map$argument_0","selectors.map$argument_0","processKeyframes","Object.entries.flatMap$argument_0","normalizeKeyframeSelector.map$argument_0","Object.entries.flatMap.sort$argument_0","Object.entries.flatMap.sort.reduce$argument_0","processStyleProperties","Object.entries.forEach$argument_0","normalizeAnimationKeyframes","processKeyframes.forEach$argument_0"],"mappings":"AAA;qBCM,iHD;sBEC,6HF;OGE;2FCC,aD;gCEC;GFoB;CHE;OMC;2CCC;mDCQ;MDM;GDC,OG,6BH,SI;GJY;CNC;AWC;gCCC;GDoB;CXC;OaC;oDCG;GDS;CbK"},"hasCjsExports":false},"type":"js/module"}]}
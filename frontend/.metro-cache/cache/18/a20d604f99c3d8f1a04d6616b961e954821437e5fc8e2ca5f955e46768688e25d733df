{"dependencies":[{"name":"./common/style/processors/colors","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":90,"index":105}}],"key":"YjEgu6mt8jwbJorQBLrbnB3aJ3w=","exportNames":["*"],"imports":1}},{"name":"./ReanimatedModule","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":106},"end":{"line":4,"column":54,"index":160}}],"key":"oecxEvQmWRmzTP60VuKAoww/f/4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"PropsRegistryGarbageCollector\", {\n    enumerable: true,\n    get: function () {\n      return PropsRegistryGarbageCollector;\n    }\n  });\n  var _commonStyleProcessorsColors = require(_dependencyMap[0], \"./common/style/processors/colors\");\n  var _ReanimatedModule = require(_dependencyMap[1], \"./ReanimatedModule\");\n  const FLUSH_INTERVAL_MS = 500;\n  const PropsRegistryGarbageCollector = {\n    viewsCount: 0,\n    viewsMap: new Map(),\n    intervalId: null,\n    registerView(viewTag, component) {\n      if (this.viewsMap.has(viewTag)) {\n        // In case of nested AnimatedComponents (like <GestureDetector> with <Animated.View> inside),\n        // `registerView` method is called first for the inner component (e.g. <Animated.View>)\n        // and then second time for the outer component (e.g. <GestureDetector>).\n        // Both of these components have the same viewTag so the inner component will be overwritten\n        // with the outer one. That's why we need to skip the logic during any subsequent calls.\n        return;\n      }\n      this.viewsMap.set(viewTag, component);\n      this.viewsCount++;\n      if (this.viewsCount === 1) {\n        this.registerInterval();\n      }\n    },\n    unregisterView(viewTag) {\n      this.viewsMap.delete(viewTag);\n      this.viewsCount--;\n      if (this.viewsCount === 0) {\n        this.unregisterInterval();\n      }\n    },\n    syncPropsBackToReact() {\n      const settledUpdates = _ReanimatedModule.ReanimatedModule.getSettledUpdates();\n      for (const {\n        viewTag,\n        styleProps\n      } of settledUpdates) {\n        const component = this.viewsMap.get(viewTag);\n        unprocessProps(styleProps);\n        component?._syncStylePropsBackToReact(styleProps);\n      }\n    },\n    registerInterval() {\n      this.intervalId = setInterval(this.syncPropsBackToReact.bind(this), FLUSH_INTERVAL_MS);\n    },\n    unregisterInterval() {\n      if (this.intervalId !== null) {\n        clearInterval(this.intervalId);\n        this.intervalId = null;\n      }\n    }\n  };\n  function unprocessProps(props) {\n    (0, _commonStyleProcessorsColors.unprocessColorsInProps)(props);\n    unprocessBoxShadow(props);\n  }\n  function unprocessBoxShadow(props) {\n    if (Array.isArray(props.boxShadow)) {\n      // @ts-ignore props is readonly\n      props.boxShadow = props.boxShadow.map(boxShadow => ({\n        ...boxShadow,\n        color: (0, _commonStyleProcessorsColors.unprocessColor)(boxShadow.color)\n      }));\n    }\n  }\n});","lineCount":76,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,6,0,"Object"],[7,8,6,0],[7,9,6,0,"defineProperty"],[7,23,6,0],[7,24,6,0,"exports"],[7,31,6,0],[8,4,6,0,"enumerable"],[8,14,6,0],[9,4,6,0,"get"],[9,7,6,0],[9,18,6,0,"get"],[9,19,6,0],[10,6,6,0],[10,13,6,0,"PropsRegistryGarbageCollector"],[10,42,6,0],[11,4,6,0],[12,2,6,0],[13,2,3,0],[13,6,3,0,"_commonStyleProcessorsColors"],[13,34,3,0],[13,37,3,0,"require"],[13,44,3,0],[13,45,3,0,"_dependencyMap"],[13,59,3,0],[14,2,4,0],[14,6,4,0,"_ReanimatedModule"],[14,23,4,0],[14,26,4,0,"require"],[14,33,4,0],[14,34,4,0,"_dependencyMap"],[14,48,4,0],[15,2,5,0],[15,8,5,6,"FLUSH_INTERVAL_MS"],[15,25,5,23],[15,28,5,26],[15,31,5,29],[16,2,6,7],[16,8,6,13,"PropsRegistryGarbageCollector"],[16,37,6,42],[16,40,6,45],[17,4,7,2,"viewsCount"],[17,14,7,12],[17,16,7,14],[17,17,7,15],[18,4,8,2,"viewsMap"],[18,12,8,10],[18,14,8,12],[18,18,8,16,"Map"],[18,21,8,19],[18,22,8,20],[18,23,8,21],[19,4,9,2,"intervalId"],[19,14,9,12],[19,16,9,14],[19,20,9,18],[20,4,10,2,"registerView"],[20,16,10,14,"registerView"],[20,17,10,15,"viewTag"],[20,24,10,22],[20,26,10,24,"component"],[20,35,10,33],[20,37,10,35],[21,6,11,4],[21,10,11,8],[21,14,11,12],[21,15,11,13,"viewsMap"],[21,23,11,21],[21,24,11,22,"has"],[21,27,11,25],[21,28,11,26,"viewTag"],[21,35,11,33],[21,36,11,34],[21,38,11,36],[22,8,12,6],[23,8,13,6],[24,8,14,6],[25,8,15,6],[26,8,16,6],[27,8,17,6],[28,6,18,4],[29,6,19,4],[29,10,19,8],[29,11,19,9,"viewsMap"],[29,19,19,17],[29,20,19,18,"set"],[29,23,19,21],[29,24,19,22,"viewTag"],[29,31,19,29],[29,33,19,31,"component"],[29,42,19,40],[29,43,19,41],[30,6,20,4],[30,10,20,8],[30,11,20,9,"viewsCount"],[30,21,20,19],[30,23,20,21],[31,6,21,4],[31,10,21,8],[31,14,21,12],[31,15,21,13,"viewsCount"],[31,25,21,23],[31,30,21,28],[31,31,21,29],[31,33,21,31],[32,8,22,6],[32,12,22,10],[32,13,22,11,"registerInterval"],[32,29,22,27],[32,30,22,28],[32,31,22,29],[33,6,23,4],[34,4,24,2],[34,5,24,3],[35,4,25,2,"unregisterView"],[35,18,25,16,"unregisterView"],[35,19,25,17,"viewTag"],[35,26,25,24],[35,28,25,26],[36,6,26,4],[36,10,26,8],[36,11,26,9,"viewsMap"],[36,19,26,17],[36,20,26,18,"delete"],[36,26,26,24],[36,27,26,25,"viewTag"],[36,34,26,32],[36,35,26,33],[37,6,27,4],[37,10,27,8],[37,11,27,9,"viewsCount"],[37,21,27,19],[37,23,27,21],[38,6,28,4],[38,10,28,8],[38,14,28,12],[38,15,28,13,"viewsCount"],[38,25,28,23],[38,30,28,28],[38,31,28,29],[38,33,28,31],[39,8,29,6],[39,12,29,10],[39,13,29,11,"unregisterInterval"],[39,31,29,29],[39,32,29,30],[39,33,29,31],[40,6,30,4],[41,4,31,2],[41,5,31,3],[42,4,32,2,"syncPropsBackToReact"],[42,24,32,22,"syncPropsBackToReact"],[42,25,32,22],[42,27,32,25],[43,6,33,4],[43,12,33,10,"settledUpdates"],[43,26,33,24],[43,29,33,27,"ReanimatedModule"],[43,46,33,43],[43,47,33,43,"ReanimatedModule"],[43,63,33,43],[43,64,33,44,"getSettledUpdates"],[43,81,33,61],[43,82,33,62],[43,83,33,63],[44,6,34,4],[44,11,34,9],[44,17,34,15],[45,8,35,6,"viewTag"],[45,15,35,13],[46,8,36,6,"styleProps"],[47,6,37,4],[47,7,37,5],[47,11,37,9,"settledUpdates"],[47,25,37,23],[47,27,37,25],[48,8,38,6],[48,14,38,12,"component"],[48,23,38,21],[48,26,38,24],[48,30,38,28],[48,31,38,29,"viewsMap"],[48,39,38,37],[48,40,38,38,"get"],[48,43,38,41],[48,44,38,42,"viewTag"],[48,51,38,49],[48,52,38,50],[49,8,39,6,"unprocessProps"],[49,22,39,20],[49,23,39,21,"styleProps"],[49,33,39,31],[49,34,39,32],[50,8,40,6,"component"],[50,17,40,15],[50,19,40,17,"_syncStylePropsBackToReact"],[50,45,40,43],[50,46,40,44,"styleProps"],[50,56,40,54],[50,57,40,55],[51,6,41,4],[52,4,42,2],[52,5,42,3],[53,4,43,2,"registerInterval"],[53,20,43,18,"registerInterval"],[53,21,43,18],[53,23,43,21],[54,6,44,4],[54,10,44,8],[54,11,44,9,"intervalId"],[54,21,44,19],[54,24,44,22,"setInterval"],[54,35,44,33],[54,36,44,34],[54,40,44,38],[54,41,44,39,"syncPropsBackToReact"],[54,61,44,59],[54,62,44,60,"bind"],[54,66,44,64],[54,67,44,65],[54,71,44,69],[54,72,44,70],[54,74,44,72,"FLUSH_INTERVAL_MS"],[54,91,44,89],[54,92,44,90],[55,4,45,2],[55,5,45,3],[56,4,46,2,"unregisterInterval"],[56,22,46,20,"unregisterInterval"],[56,23,46,20],[56,25,46,23],[57,6,47,4],[57,10,47,8],[57,14,47,12],[57,15,47,13,"intervalId"],[57,25,47,23],[57,30,47,28],[57,34,47,32],[57,36,47,34],[58,8,48,6,"clearInterval"],[58,21,48,19],[58,22,48,20],[58,26,48,24],[58,27,48,25,"intervalId"],[58,37,48,35],[58,38,48,36],[59,8,49,6],[59,12,49,10],[59,13,49,11,"intervalId"],[59,23,49,21],[59,26,49,24],[59,30,49,28],[60,6,50,4],[61,4,51,2],[62,2,52,0],[62,3,52,1],[63,2,53,0],[63,11,53,9,"unprocessProps"],[63,25,53,23,"unprocessProps"],[63,26,53,24,"props"],[63,31,53,29],[63,33,53,31],[64,4,54,2],[64,8,54,2,"unprocessColorsInProps"],[64,36,54,24],[64,37,54,24,"unprocessColorsInProps"],[64,59,54,24],[64,61,54,25,"props"],[64,66,54,30],[64,67,54,31],[65,4,55,2,"unprocessBoxShadow"],[65,22,55,20],[65,23,55,21,"props"],[65,28,55,26],[65,29,55,27],[66,2,56,0],[67,2,57,0],[67,11,57,9,"unprocessBoxShadow"],[67,29,57,27,"unprocessBoxShadow"],[67,30,57,28,"props"],[67,35,57,33],[67,37,57,35],[68,4,58,2],[68,8,58,6,"Array"],[68,13,58,11],[68,14,58,12,"isArray"],[68,21,58,19],[68,22,58,20,"props"],[68,27,58,25],[68,28,58,26,"boxShadow"],[68,37,58,35],[68,38,58,36],[68,40,58,38],[69,6,59,4],[70,6,60,4,"props"],[70,11,60,9],[70,12,60,10,"boxShadow"],[70,21,60,19],[70,24,60,22,"props"],[70,29,60,27],[70,30,60,28,"boxShadow"],[70,39,60,37],[70,40,60,38,"map"],[70,43,60,41],[70,44,60,42,"boxShadow"],[70,53,60,51],[70,58,60,56],[71,8,61,6],[71,11,61,9,"boxShadow"],[71,20,61,18],[72,8,62,6,"color"],[72,13,62,11],[72,15,62,13],[72,19,62,13,"unprocessColor"],[72,47,62,27],[72,48,62,27,"unprocessColor"],[72,62,62,27],[72,64,62,28,"boxShadow"],[72,73,62,37],[72,74,62,38,"color"],[72,79,62,43],[73,6,63,4],[73,7,63,5],[73,8,63,6],[73,9,63,7],[74,4,64,2],[75,2,65,0],[76,0,65,1],[76,3]],"functionMap":{"names":["<global>","registerView","unregisterView","syncPropsBackToReact","registerInterval","unregisterInterval","unprocessProps","unprocessBoxShadow","props.boxShadow.map$argument_0"],"mappings":"AAA;ECS;GDc;EEC;GFM;EGC;GHU;EIC;GJE;EKC;GLK;AME;CNG;AOC;0CCG;MDG;CPE"},"hasCjsExports":false},"type":"js/module"}]}